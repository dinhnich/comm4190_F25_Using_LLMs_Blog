<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Nicholas">
<meta name="dcterms.date" content="2025-09-16">
<meta name="description" content="Can AI trace it’s own evolution and what does AI think about it’s intelligence?">

<title>A Conversation About Evolution – Nick’s LLM Experiments</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-fa6ebe1abc24c69c1ddb9a141d0fa116.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Nick’s LLM Experiments</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">A Conversation About Evolution</h1>
                  <div>
        <div class="description">
          Can AI trace it’s own evolution and what does AI think about it’s intelligence?
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Evolution</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Nicholas </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 16, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><img src="evo1.png" width="100%"></p>
<section id="how-ai-tells-its-story" class="level2">
<h2 class="anchored" data-anchor-id="how-ai-tells-its-story">How AI tells its story</h2>
<p>Continuing from my last blog and taking some inspiration from Bennett, I wanted to first see how AI told it’s evolution. I was curious how far it would go back, what it would and wouldn’t consider, how it connects each stage, and the overall difference or similarity in terms of human evolution. My hypothesis is that it will give me an answer much similar to if I asked it to track the evolution of computers. If so, it gives me more reason to conclude that human evolution of the brain may not be the best route to choose. After all, our brain develops from interactions with the word and our bodies (c02 –&gt; 02)) while AI is truly separate from anything else besides data.</p>
<blockquote class="blockquote">
<p>Me: Can you trace each stage of your artificial intelligence evolution?</p>
</blockquote>
<blockquote class="blockquote">
<p>GPT-5: <strong>1) Foundations &amp; symbolic AI (1940s–1970s)</strong> What: Logic, rules, symbolic representations (if–then systems, theorem provers). Limitations: brittle, didn’t scale to messy real-world data (language, vision). <strong>2) Probabilistic AI &amp; statistical learning (1970s–1990s)</strong> What: Bayesian methods, hidden Markov models, decision theory, graphical models. <strong>3) Classical machine learning (1990s–2010s)</strong> What: Support Vector Machines, decision trees, ensemble methods (random forests, boosting). Supervised learning on hand-crafted features. <strong>4) Early neural networks &amp; representation learning (1980s–2000s, resurging in 2010s)</strong> What: Backpropagation, multi-layer perceptrons, early convolutional and recurrent nets. Focus on learning representations from raw data. <strong>5) Deep learning revolution (2012–late 2010s)</strong> What: Large deep convolutional nets, large-scale GPUs, lots of labeled/transfer data. Breakthroughs like AlexNet, ResNet, etc. <strong>6) Sequence models and attention (mid-2010s)</strong> What: Recurrent nets (LSTMs/GRUs) improved sequence tasks; attention mechanisms introduced to selectively focus on inputs. <strong>7) Transformers &amp; the scale era (2017 → present)</strong> What: Transformer architecture (self-attention) enabled massively parallel training and much larger models. <strong>8) Large Language Models (LLMs), pretraining + fine-tuning (2018 → present)</strong> What: Pretrain on very large text corpora with self-supervised objectives (predict next token / masked token), then fine-tune for tasks. <strong>9) Instruction tuning &amp; human alignment (2020s)</strong> What: Fine-tuning LLMs on instruction-response pairs; RL from Human Feedback (RLHF) to make outputs more helpful and safer. <strong>10) Chain-of-thought, reasoning techniques (2020s)</strong> What: Methods encouraging models to produce intermediate reasoning steps (chain-of-thought), and prompting strategies that improve multi-step reasoning. <strong>11) Multimodality and tool use (2020s–2025)</strong> What: Models ingesting and producing multiple modalities (text, images, audio) and safely invoking external tools/APIs (search, calculators, plugins). <strong>12) Specialized architectures &amp; efficiency improvements (2020s)</strong> What: Sparse models, retrieval-augmented generation (RAG), modular systems, more efficient training/inference techniques.</p>
</blockquote>
<p>Now if you’re like me, there’s several things that I don’t understand or have heard of from this list. So to get a better understanding, how about we ask it to transform this into a more easier.</p>
<blockquote class="blockquote">
<p>GPT-5: <strong>Rules Era (1940s–70s)</strong> People told computers exactly what to do with strict rules, like teaching a robot chess by writing down every move it could play. → Problem: Too rigid, broke when life got messy. <strong>Math &amp; Probability Era (1970s–90s)</strong> AI started using math to deal with uncertainty. Think of voice assistants trying to guess what word you said even if it’s a bit unclear. → Better, but still limited. <strong>Learning from Examples (1990s–2010s)</strong> Instead of rules, computers learned patterns from examples — like showing thousands of spam vs.&nbsp;non-spam emails. → Very useful, but needed a lot of human prep work. <strong>Neural Networks Come Back (2000s–2010s)</strong> Inspired by the brain, these systems learned directly from raw data (like pixels in photos). → Big step toward computers recognizing images and speech. <strong>Deep Learning Boom (2012–)</strong> With more data and powerful chips, AI suddenly got really good — especially at images (spotting cats, faces, objects). → AI became mainstream. <strong>Language Breakthrough (2017–)</strong> A new design called the Transformer let AI read and write language smoothly. → The foundation for modern chatbots. <strong>Big AI Models (2018–)</strong> Trained on massive amounts of text, these models could answer questions, write stories, and translate languages — all in one. → One brain, many skills. <strong>Helpful AI (2020s)</strong> Models were fine-tuned to follow instructions better, like a friendly assistant. → That’s why I can respond clearly when you ask for help. <strong>Smarter Thinking (Now)</strong> AI is learning to “think out loud,” reason step by step, look at images, talk in multiple ways, and even use tools (like search or calculators). → Makes it more useful, safe, and reliable.</p>
</blockquote>
<p>Esssentially, AI went from rules -&gt; math -&gt; patterns -&gt; neural networks -&gt; deep learning -&gt; transformer -&gt; larger data -&gt; fine-tuned.</p>
<p>From this outlook, AI seems like it followed generally straight path with each addition adding onto the next. One thing I did notice was 80 year time-period it took for AI to have the intelligence as it does now as opposed to the x billion of years it took for humans to develop. We also see how AI is studied in isolation as opposed to comparing other organisms. In other words, does this look much different in terms of the structure than someone describing the evolution of footwear? But the study of the evolution of the brain is much more nuanced. Are we overcomplicating something that should be simple?</p>
<p>Let’s first further explore how GPT-5 fits itself into evolution and it’s future predictions.</p>
</section>
<section id="how-does-gpt-5-see-itself-what-future-predictions-does-it-hold" class="level2">
<h2 class="anchored" data-anchor-id="how-does-gpt-5-see-itself-what-future-predictions-does-it-hold">How does GPT-5 see itself? What future predictions does it hold?</h2>
<p>An important idea to test is how does GPT-5 see itself along this evolutionary stage. How good is it at measuring itself in relation to AI progress?</p>
<blockquote class="blockquote">
<p>Me: Where do you see yourself fitting along the evolutionary stage?</p>
</blockquote>
<blockquote class="blockquote">
<p>GPT-5: I sit near the latest stage — the “reasoning-first, instruction-tuned, multimodal” part of the timeline. I’m GPT-5 Thinking mini. Here’s what that means in plain terms: <strong>• Why I belong here</strong> — I combine a strong language “brain” (learned from lots of text) with training that teaches me to follow instructions, explain my steps, and use tools when helpful. I’m built to be helpful, safe, and better at step-by-step reasoning than older chatbots. <strong>• What I’m good at</strong> (real-world examples) Writing clear explanations, summaries, or emails. Tutoring or walking you through multi-step problems (math, planning, debugging). Creative work: stories, scripts, ad copy. Understanding and describing images (if you give one) and combining that with text. Using built-in tools like calculators, search, or plugins when available. <strong>• Where I’m still limited</strong> I can make confident-sounding mistakes — double-check facts for critical decisions. I don’t have real-time personal experience or direct access to your private files unless you share them. I aim to be safe and avoid harmful or sensitive actions; some requests I’ll refuse or steer to safer alternatives. <strong>• How to use me effectively</strong> Give clear instructions and examples of the style you want. Ask me to show my steps if you want to verify reasoning. For high-stakes facts (legal, medical, financial), treat my answers as a starting point and verify with an expert.</p>
</blockquote>
<p>I like how GPT-5 mentions where it’s limited in, good at, and tips for how to use the tool effectively to adjust for shortcomings. I did notice how this model in particular seems most dedicated towards being a “tutor” with very clear thought processes and adapted to working with the pilot as a smart assistant. Let’s see how it predicts the future of AI.</p>
<blockquote class="blockquote">
<p>Me: Whats your prediction on the future evolution of AI? What do you think are the next steps?</p>
</blockquote>
<blockquote class="blockquote">
<p>GPT-5: <strong>Better Reasoning, Less Guessing</strong> Today, even smart AIs sometimes “make things up.” Next: models will reason more like people do step by step, double-checking themselves. Imagine an AI that shows its work like a good student in math class. <strong>Memory &amp; Personalization</strong> Right now, I only “remember” what’s in this chat (unless you let me keep memories across conversations). Future AIs could have safe, optional memory: remembering your preferences, projects, style, and context over time. Imagine an assistant that remembers your last holiday plans, your favorite way of writing, or the project you’re working on. <strong>More Senses (Multimodality++)</strong> Today: text, images, some speech. Next: smoother combination of voice, video, touch, and maybe even physical sensors. Imagine showing your AI a cooking video, then asking it to suggest tweaks for your own kitchen. <strong>Tool Use &amp; Collaboration</strong> AIs will get better at calling tools (like search, spreadsheets, code, maps) automatically when needed. Think of an assistant that doesn’t just “tell you” but also does things: books your tickets, runs code, drafts reports with data plugged in. <strong>Smaller, Smarter, Cheaper</strong> Not every AI will be giant. Future models will be more efficient, so they can run on phones, cars, or even wearables. Imagine a “pocket AI” that helps you offline without draining your battery. <strong>Early Signs of Creativity &amp; Discovery</strong> AIs will assist in new science and ideas — not just repeating what humans know, but suggesting fresh experiments, designs, and solutions. We already see glimpses in drug discovery, materials science, and climate solutions. <strong>✨ Big Picture</strong> AI is moving from: “Helpful parrot” → “Reliable partner” → “Creative collaborator.” We’re at the second stage now, edging into the third.</p>
</blockquote>
<p>I am in awe of its response. Mainly because GPT-5 can come up with several improvements and features for the future on how AI can grow. Yet when I tried to answer the same prompt I gave it for human intelligence, I had a more difficult time. I am unsure if we reached the peak of the human brain and if there’s anyway we evolve me. Yet as I read this list, things like “pocket AI” and “Tool Use &amp; Collaboration” are not necessarily intelligence related but functional use. The more I interact with this subject, the more my gut feeling leads me to my belief that human intelligence can not be the benchmark for artificial intelligence. Could it be in the future that both intelligences are required for new discoveries as mentioned in the last few sentences of it’s output?</p>
</section>
<section id="how-does-gpt-compare-ai-evolution-to-the-evolution-of-the-brain" class="level2">
<h2 class="anchored" data-anchor-id="how-does-gpt-compare-ai-evolution-to-the-evolution-of-the-brain">How does GPT compare AI evolution to the evolution of the brain?</h2>
<blockquote class="blockquote">
<p>Me: How do you think the evolution of artificial intelligence compares to evolution of human intelligence (the brain)? Is it a good or bad comparison?</p>
</blockquote>
<blockquote class="blockquote">
<p>GPT-5: <strong>✅ Why the comparison makes some sense</strong> Inspiration: Neural networks were inspired by how brain cells (neurons) connect. Stages feel similar: • Babies first learn rules (like “cry → get fed”) → symbolic AI. • Kids learn patterns from examples (seeing dogs vs cats) → machine learning. • Adults build reasoning, abstract thought, and creativity → today’s reasoning-first AI. Learning from experience: Both brains and AIs improve when exposed to lots of examples. <strong>❌ Why it’s also misleading</strong> - Brains are alive: Human intelligence evolved through millions of years of biology, survival pressures, emotions, and social interaction. AI evolves through design, code, and training — very different forces. - One brain vs.&nbsp;many models: Humans have one general-purpose brain. AI has many versions (different models for images, speech, reasoning, etc.) and doesn’t unify them the way we do. - Motivation &amp; goals: People want things (food, comfort, love). AIs don’t have desires — they follow training and prompts. - - Efficiency: The human brain runs on ~20 watts of energy (a light bulb). AI models need giant servers and massive power. <strong>⚖️ So… is it a good or bad comparison?</strong> It’s a good analogy for beginners: comparing AI to brains makes the concepts less scary and easier to picture. It’s a bad analogy if taken literally: AI is not “thinking” the way we do, doesn’t have consciousness, and doesn’t evolve biologically. <strong>📌 A better way to think of it</strong> AI is less like “a brain” and more like a new kind of tool that borrows tricks from brains. It’s closer to a calculator that can explain itself, imagine, and hold a conversation — but without the drives, emotions, or survival instincts that shape human thought.</p>
</blockquote>
<p>I agree with this response. I do think the comparison makes some sense especially since neural networks were inspired by the connections between neurons as expressed by Bennnett. But I agree more strongly with why it is misleading and how AI is fundamentally different from a living organism.</p>
<p>In the end, the goal isn’t for AI to replace humans or to be human. It should be a counterpart to human intelligence that not only makes life easier but potentially be the key to solving problems we couldn’t before.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/dinhnich\.github\.io\/comm4190_F25_Using_LLMs_Blog\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>